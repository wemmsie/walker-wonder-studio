(()=>{var e={556:(e,t,n)=>{e.exports=n(694)()},694:(e,t,n)=>{"use strict";var s=n(925);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},942:(e,t)=>{var n;!function(){"use strict";var s={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)s.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.domReady;var t=n.n(e);const s=window.wp.element,r=window.wp.i18n;var a=n(942),o=n.n(a);const i=window.lodash;var d=n(556),l=n.n(d);const c={variant:{default:"",primary:"nfd-text-primary-500",white:"nfd-text-white"},size:{3:"nfd-w-3 nfd-h-3",4:"nfd-w-4 nfd-h-4",8:"nfd-w-8 nfd-h-8"}},p=(0,s.forwardRef)((({variant:e,size:t,className:n},r)=>{const a=((e=null)=>(0,s.useMemo)((()=>{const t={role:"img","aria-hidden":"true"};return null!==e&&(t.focusable=e?"true":"false"),t}),[e]))();return(0,s.createElement)("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg/",fill:"none",viewBox:"0 0 24 24",className:o()("nfd-animate-spin",c.variant[e],c.size[t],n),...a},(0,s.createElement)("circle",{className:"nfd-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.createElement)("path",{className:"nfd-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))})),f={variant:l().oneOf((0,i.keys)(c.variant)),size:l().oneOf((0,i.keys)(c.size)),className:l().string};p.propTypes=f,p.defaultProps={variant:"default",size:"4",className:""};const u=e=>(0,s.createElement)(p,{...e});u.propTypes=f,u.defaultProps=p.defaultProps,u.displayName="Spinner";const m=p,x={variant:{primary:"nfd-button--primary",secondary:"nfd-button--secondary",error:"nfd-button--error",upsell:"nfd-button--upsell"},size:{default:"",small:"nfd-button--small",large:"nfd-button--large"}},h=(0,s.forwardRef)((({children:e,as:t,type:n,variant:r,size:a,isLoading:i,disabled:d,className:l,...c},p)=>(0,s.createElement)(t,{type:n||"button"===t&&"button"||void 0,disabled:d,ref:p,className:o()("nfd-button",x.variant[r],x.size[a],i&&"nfd-cursor-wait",d&&"nfd-button--disabled",l),...c},i&&(0,s.createElement)(m,{size:"small"===a?"3":"4",className:"nfd-mr-2"}),e))),w={children:l().node.isRequired,as:l().elementType,type:l().oneOf(["button","submit","reset"]),variant:l().oneOf((0,i.keys)(x.variant)),size:l().oneOf((0,i.keys)(x.size)),isLoading:l().bool,disabled:l().bool,className:l().string};h.propTypes=w,h.defaultProps={as:"button",type:void 0,variant:"primary",size:"default",isLoading:!1,disabled:!1,className:""};const k=h,g=e=>(0,s.createElement)(h,{...e});g.propTypes=w,g.defaultProps=h.defaultProps,g.displayName="Button";const v=window.React;function b({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const j=v.forwardRef(b);function y({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const N=v.forwardRef(y);function E({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _=v.forwardRef(E);function C({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const S=v.forwardRef(C);function R({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const O=v.forwardRef(R);function T({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const P=v.forwardRef(T);function I({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const z=v.forwardRef(I);function U({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const L=v.forwardRef(U);function M({title:e,titleId:t,...n},s){return v.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?v.createElement("title",{id:t},e):null,v.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const D=v.forwardRef(M),A=window.ReactJSXRuntime,B=(0,A.jsx)(j,{className:"size-6"}),W=(0,A.jsx)(N,{className:"size-6"}),q=(0,A.jsx)(_,{className:"size-6"}),$=(0,A.jsx)(S,{className:"size-6"}),F=(0,A.jsx)(O,{className:"size-6"}),H=(0,A.jsx)(D,{className:"size-6"}),V=(0,A.jsx)(P,{className:"size-6"}),Z=(0,A.jsx)(z,{className:"size-6"}),J=(0,A.jsx)(L,{className:"size-6"}),X=(0,A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",fill:"none",className:"size-6",children:(0,A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.716 3.165a9 9 0 0 1 3.315 1.373m2.43 2.429a9 9 0 0 1 1.374 3.316m0 3.434a9 9 0 0 1-1.373 3.315m-2.43 2.43a9 9 0 0 1-3.316 1.373m-3.432 0a9 9 0 0 1-3.316-1.373m-2.43-2.43a9 9 0 0 1-1.373-3.315m0-3.434a9 9 0 0 1 1.373-3.315m2.43-2.43a9 9 0 0 1 3.316-1.373"})}),Y=(0,A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",fill:"none",className:"size-6",children:(0,A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})}),G=(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg/",fill:"none",viewBox:"0 0 24 24",class:"next-steps-spinner nfd-animate-spin nfd-w-8 nfd-h-8",role:"img","aria-hidden":"true",children:[(0,A.jsx)("circle",{class:"nfd-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,A.jsx)("path",{class:"nfd-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),K={size:{1:"nfd-title--1",2:"nfd-title--2",3:"nfd-title--3",4:"nfd-title--4",5:"nfd-title--5"}},Q=(0,s.forwardRef)((({children:e,as:t,size:n,className:r,...a},i)=>(0,s.createElement)(t,{ref:i,className:o()("nfd-title",K.size[n||t[1]],r),...a},e))),ee={children:l().node.isRequired,as:l().elementType,size:l().oneOf(Object.keys(K.size)),className:l().string};Q.propTypes=ee,Q.defaultProps={as:"h1",size:void 0,className:""};const te=e=>(0,s.createElement)(Q,{...e});te.propTypes=ee,te.defaultProps=Q.defaultProps,te.displayName="Title";const ne=Q,se=(0,s.memo)((({completed:e,total:t})=>{const n=t?Math.round(e/t*100):0;return(0,A.jsxs)("div",{className:`nfd-progress-bar nfd-progress-bar-${n}`,children:[(0,A.jsx)("div",{className:"nfd-progress-bar-inner","data-percent":n,style:{width:`${n}%`}}),(0,A.jsxs)("span",{className:"nfd-progress-bar-label",children:[e,"/",t]})]})})),re=(0,s.memo)((e=>{const{index:t,sectionId:n,showDismissed:a,task:o,taskUpdateCallback:i,trackId:d}=e,{id:l,title:c="",href:p,data_attributes:f={}}=o,[u,m]=(0,s.useState)(o.status);(0,s.useEffect)((()=>{m(o.status)}),[o.status]);const x=e=>{const t=u;m(e),i(d,n,l,e,(e=>{m(t)}),(t=>{m(e)}))},h=()=>{let e=p;return e.includes("{siteUrl}")&&(e=p.replace("{siteUrl}",window.NewfoldRuntime.siteUrl)),window.NewfoldRuntime?.linkTracker?.addUtmParams(e)||e},w=()=>p.includes("{siteUrl}")||p.includes(window.NewfoldRuntime.siteUrl)?"":"_blank",k={...(()=>{const e={"data-nfd-task-index":t,"data-nfd-task-id":l,"data-nfd-task-status":u};return Object.entries(f).forEach((([t,n])=>{const s=t.startsWith("data-")?t:`data-${t}`;e[s]="boolean"==typeof n?n?"true":"false":n})),e})()},g=(e=!1,t="")=>(0,A.jsxs)("div",{className:"nfd-nextsteps-step-content nfd-flex nfd-flex-col nfd-justify-between",children:[e&&(0,A.jsx)("a",{href:e,target:t,children:(0,A.jsx)(ne,{as:"span",className:"nfd-nextsteps-step-title nfd-font-normal",children:c})}),!e&&(0,A.jsx)(ne,{as:"span",className:"nfd-nextsteps-step-title nfd-font-normal",children:c})]});return(0,A.jsxs)(A.Fragment,{children:["new"===u&&(0,A.jsx)("div",{className:"nfd-nextsteps-step-container",id:l,...k,children:(0,A.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-new nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,A.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,A.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-todo","data-nfd-click":"nextsteps_step_check","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,onClick:e=>x("done"),title:(0,r.__)("Mark Complete","wp-module-next-steps"),children:Y})}),g(h(),w()),(0,A.jsxs)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-4 nfd-justify-end nfd-ml-auto",children:[(0,A.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-dismiss","data-nfd-click":"nextsteps_step_dismiss","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,onClick:e=>x("dismissed"),title:(0,r.__)("Skip","wp-module-next-steps"),children:$}),(0,A.jsx)("a",{className:"nfd-nextsteps-button nfd-nextsteps-button-link","data-nfd-click":"nextsteps_step_link","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,href:h(),target:w(),title:c,children:V})]})]})}),"done"===u&&(0,A.jsx)("div",{className:"nfd-nextsteps-step-container",id:l,...k,children:(0,A.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-done nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,A.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,A.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-redo","data-nfd-click":"nextsteps_step_redo","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,onClick:e=>x("new"),title:(0,r.__)("Restart","wp-module-next-steps"),children:H})}),g(h(),w())]})}),"dismissed"===u&&a&&(0,A.jsx)("div",{className:"nfd-nextsteps-step-container",id:l,...k,children:(0,A.jsxs)("div",{className:"nfd-nextsteps-step nfd-nextsteps-step-dismissed nfd-flex nfd-flex-row nfd-justify-start nfd-items-center nfd-gap-4",children:[(0,A.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-end",children:(0,A.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-redo","data-nfd-click":"nextsteps_step_redo","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,onClick:e=>x("new"),title:(0,r.__)("Unskip","wp-module-next-steps"),children:X})}),g(h(),w()),(0,A.jsx)("div",{className:"nfd-nextsteps-buttons nfd-flex nfd-flex-row nfd-gap-4 nfd-justify-end nfd-ml-auto",children:(0,A.jsx)("button",{className:"nfd-nextsteps-button nfd-nextsteps-button-dismiss","data-nfd-click":"nextsteps_step_dismiss","data-nfd-event-category":"nextsteps_step","data-nfd-event-key":l,onClick:e=>x("new"),title:(0,r.__)("Unskip","wp-module-next-steps"),children:F})})]})})]})}));class ae extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),e.name?.includes("APIError")&&console.error("API Error Details:",{endpoint:e.data?.endpoint,requestData:e.data?.requestData,originalError:e.originalError,status:e.originalError?.status}),this.setState({error:e,errorInfo:t}),window.NewfoldRuntime?.capabilities?.canLogErrors&&this.logErrorToService(e,t)}logErrorToService=(e,t)=>{try{console.warn("Error logged:",{error:e.toString(),componentStack:t.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href})}catch(e){console.error("Failed to log error:",e)}};handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){if(this.state.hasError){const{fallback:e,showDetails:t=!1}=this.props;if(e)return e;const n=this.state.error?.name?.includes("APIError"),s=n?(0,r.__)("We encountered a connection error. Please check your internet connection and try again.","wp-module-next-steps"):(0,r.__)("We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists.","wp-module-next-steps");return(0,A.jsx)("div",{className:"nfd-error-boundary",children:(0,A.jsxs)("div",{className:"nfd-error-boundary-content",children:[(0,A.jsx)("h3",{children:n?(0,r.__)("Connection Error","wp-module-next-steps"):(0,r.__)("Something went wrong","wp-module-next-steps")}),(0,A.jsx)("p",{children:s}),(0,A.jsxs)("div",{className:"nfd-error-boundary-actions",children:[(0,A.jsx)(k,{variant:"primary",onClick:this.handleRetry,children:(0,r.__)("Try Again","wp-module-next-steps")}),(0,A.jsx)(k,{variant:"secondary",onClick:()=>window.location.reload(),children:(0,r.__)("Refresh Page","wp-module-next-steps")})]}),t&&this.state.error&&(0,A.jsxs)("details",{className:"nfd-error-boundary-details",children:[(0,A.jsx)("summary",{children:(0,r.__)("Technical Details","wp-module-next-steps")}),(0,A.jsxs)("pre",{className:"nfd-error-boundary-stack",children:[this.state.error.toString(),this.state.errorInfo.componentStack]})]})]})})}return this.props.children}}class oe extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("Next Steps Error:",e,t),window.NewfoldRuntime?.restUrl&&this.reportNextStepsError(e,t)}reportNextStepsError=async(e,t)=>{try{console.warn("Next Steps error reported:",{module:"next-steps",error:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString()})}catch(e){console.error("Failed to report Next Steps error:",e)}};render(){return this.state.hasError?(0,A.jsx)("div",{className:"nfd-nextsteps-error",children:(0,A.jsxs)("div",{className:"nfd-nextsteps-error-content",children:[(0,A.jsx)("h3",{children:(0,r.__)("Next Steps Unavailable","wp-module-next-steps")}),(0,A.jsx)("p",{children:(0,r.__)("The Next Steps module encountered an error and cannot be displayed right now.","wp-module-next-steps")}),(0,A.jsx)(k,{variant:"primary",onClick:()=>window.location.reload(),children:(0,r.__)("Refresh Page","wp-module-next-steps")})]})}):this.props.children}}s.Component;const ie=(0,s.memo)((e=>{const{index:t,section:n,sectionOpenCallback:a,showDismissed:o,taskUpdateCallback:i,trackId:d}=e,{totalCount:l,completedCount:c,isComplete:p}=n.progress||{totalCount:0,completedCount:0,isComplete:!1},[f,u]=(0,s.useState)(!1),m=(0,s.useRef)(p),x=(0,s.useRef)(!0);return(0,s.useEffect)((()=>{p&&l>0&&!m.current&&!x.current&&u(!0),m.current=p,x.current=!1}),[p]),(l>0||!0===o)&&(0,A.jsxs)("details",{className:"nfd-section","data-nfd-section-id":n.id,"data-nfd-section-index":t,onToggle:e=>{e.stopPropagation();const t=e.target.open;a(d,n.id,t)},open:n.open,children:[(0,A.jsxs)("summary",{className:"nfd-section-header",children:[(0,A.jsxs)(ne,{className:"nfd-section-title mb-0",as:"h3",children:[(0,A.jsxs)("span",{className:"nfd-section-header-icon nfd-header-icon",children:[(0,A.jsx)("span",{className:"nfd-section-header-icon-closed",children:W}),(0,A.jsx)("span",{className:"nfd-section-header-icon-opened",children:q})]}),n.label]}),l>0&&(0,A.jsx)(se,{completed:c,total:l})]}),(0,A.jsx)("div",{className:"nfd-section-steps",children:n.tasks.map(((e,t)=>(0,A.jsx)(ae,{fallback:(0,A.jsx)("div",{className:"nfd-task-error",children:(0,A.jsx)("p",{children:(0,r.__)("Task temporarily unavailable","wp-module-next-steps")})}),children:(0,A.jsx)(re,{index:t,sectionId:n.id,showDismissed:o,task:e,taskUpdateCallback:i,trackId:d},e.id)},`task-boundary-${e.id}`)))}),(0,A.jsxs)("div",{className:"nfd-section-complete","data-complete":p,"data-show-celebration":f,onClick:e=>{u(!1),a(d,n.id,!1)},children:[(0,A.jsx)("button",{className:"nfd-nextsteps-section-close-button",title:(0,r.__)("Close","wp-module-next-steps"),children:J}),(0,A.jsx)("div",{className:"nfd-section-celebrate",children:Z}),(0,A.jsx)("p",{className:"nfd-section-celebrate-text",children:(0,r.__)("All complete!","wp-module-next-steps")})]})]})})),de=(0,s.memo)((e=>{const{index:t,track:n,sectionOpenCallback:s,showDismissed:r,taskUpdateCallback:a,trackOpenCallback:o}=e;return(0,A.jsxs)("details",{className:"nfd-track",onToggle:e=>{const t=e.target.open;o(n.id,t)},"data-nfd-track-id":n.id,"data-nfd-track-index":t,open:n.open,children:[(0,A.jsxs)("summary",{className:"nfd-track-header",children:[(0,A.jsx)(ne,{className:"nfd-track-title mb-0",as:"h2",children:n.label}),(0,A.jsx)("span",{className:"nfd-track-header-icon nfd-header-icon",children:B})]}),(0,A.jsx)("div",{className:"nfd-track-sections",children:n.sections.map(((e,t)=>(0,A.jsx)(ae,{fallback:(0,A.jsx)("div",{className:"nfd-section-error",children:(0,A.jsx)("p",{children:"Section temporarily unavailable"})}),children:(0,A.jsx)(ie,{index:t,section:e,sectionOpenCallback:s,showDismissed:r,taskUpdateCallback:a,trackId:n.id},e.id)},`section-boundary-${e.id}`)))})]})})),le=window.wp.apiFetch;var ce=n.n(le);const pe=e=>e.status>=500||!e.status||!!e.name?.includes("Critical")||401===e.status||403===e.status,fe=e=>{if(!e.tasks?.length)return{totalCount:0,completedCount:0,isComplete:!1,percentage:0};const t=e.tasks.filter((e=>"dismissed"!==e.status)).length,n=e.tasks.filter((e=>"done"===e.status)).length;return{totalCount:t,completedCount:n,isComplete:t>0&&n===t,percentage:t>0?Math.round(n/t*100):0}},ue=(e,t)=>e.includes("?")?e+encodeURIComponent(t):e+t,me=()=>{const[e,t]=(0,s.useState)(window.NewfoldNextSteps),[n,a]=(0,s.useState)(!0),[o,i]=(0,s.useState)(!1),d=(0,s.useMemo)((()=>e?(e=>e?.tracks?{...e,tracks:e.tracks.map((e=>({...e,sections:e.sections.map((e=>({...e,progress:fe(e)})))})))}:e)(e):null),[e]),l=(n,s,r,a,o,i)=>{var d;d={plan_id:e.id,track_id:n,section_id:s,task_id:r,status:a},ce()({url:ue(window.NewfoldRuntime.restUrl,"newfold-next-steps/v1/steps/status"),method:"PUT",data:d}).then((e=>{if(e&&e.error){const t=new Error(`Task update failed: ${e.error}`);throw t.name="TaskUpdateError",t.data={response:e,requestData:d},t}(e=>{t((e=>((e,t,n,s,r)=>({...e,tracks:e.tracks.map((e=>e.id===t?{...e,sections:e.sections.map((e=>{if(e.id===n){const t={...e,tasks:e.tasks.map((e=>e.id===s?{...e,status:r}:e))};return{...t,progress:fe(t)}}return e}))}:e))}))(e,n,s,r,a))),i(e)})(e)})).catch((e=>{const t=new Error(`Task update API error: ${e.message||"Unknown error"}`);if(t.name="TaskUpdateAPIError",t.originalError=e,t.data={requestData:d,endpoint:"steps/status"},(e=>{o(e)})(t),pe(e))throw t}))},c=(n,s,r)=>{var a;n&&s&&(a={plan_id:e.id,track_id:n,section_id:s,open:r},ce()({url:ue(window.NewfoldRuntime.restUrl,"newfold-next-steps/v1/steps/section/open"),method:"PUT",data:a}).then((e=>{if(e&&e.error){const t=new Error(`Section update failed: ${e.error}`);throw t.name="SectionUpdateError",t.data={response:e,requestData:a},t}t((e=>((e,t,n,s)=>({...e,tracks:e.tracks.map((e=>e.id===t?{...e,sections:e.sections.map((e=>e.id===n?{...e,open:s}:e))}:e))}))(e,n,s,r)))})).catch((e=>{const t=new Error(`Section update API error: ${e.message||"Unknown error"}`);if(t.name="SectionUpdateAPIError",t.originalError=e,t.data={requestData:a,endpoint:"steps/section/open"},pe(e))throw t})))},p=(n,s)=>{var r;r={plan_id:e.id,track_id:n,open:s},ce()({url:ue(window.NewfoldRuntime.restUrl,"newfold-next-steps/v1/steps/track/open"),method:"PUT",data:r}).then((e=>{if(e&&e.error){const t=new Error(`Track update failed: ${e.error}`);throw t.name="TrackUpdateError",t.data={response:e,requestData:r},t}t((e=>((e,t,n)=>({...e,tracks:e.tracks.map((e=>e.id===t?{...e,open:n}:e))}))(e,n,s)))})).catch((e=>{const t=new Error(`Track update API error: ${e.message||"Unknown error"}`);if(t.name="TrackUpdateAPIError",t.originalError=e,t.data={requestData:r,endpoint:"steps/track/open"},pe(e))throw t}))};return d&&d.tracks?(0,A.jsx)(oe,{children:(0,A.jsxs)("div",{className:"nfd-nextsteps","data-nfd-plan-id":d.id,id:"nfd-nextsteps",children:[(0,A.jsx)("p",{className:"nfd-pb-4",children:d.description}),d.tracks.map(((e,t)=>(0,A.jsx)(de,{index:t,sectionOpenCallback:c,showDismissed:n,taskUpdateCallback:l,track:e,trackOpenCallback:p},e.id))),o&&(0,A.jsx)("div",{className:"nfd-nextsteps-filters nfd-flex nfd-flex-row nfd-gap-2 nfd-justify-center",children:(0,A.jsxs)(k,{className:"nfd-nextsteps-filter-button","data-nfd-click":"nextsteps_step_toggle","data-nfd-event-category":"nextsteps_toggle","data-nfd-event-key":"toggle",onClick:()=>{a(!n)},variant:"secondary",children:[$,n?(0,r.__)("Hide skipped tasks","wp-module-next-steps"):(0,r.__)("View skipped tasks","wp-module-next-steps")]})})]})}):(0,A.jsxs)("div",{className:"nfd-nextsteps",id:"nfd-nextsteps",children:[G,(0,A.jsx)("p",{children:(0,r.__)("Loading next steps...","wp-module-next-steps")})]})},xe=()=>{const[e,t]=(0,s.useState)(null);return(0,s.useEffect)((()=>{const e=window.NFDPortalRegistry;if(!e)return;const n=e=>{t(e)};e.onReady("next-steps",n),e.onRemoved("next-steps",(()=>{t(null)}));const s=e.getElement("next-steps");s&&n(s)}),[e]),e?(0,s.createPortal)((0,A.jsx)("div",{className:"next-steps-fill",children:(0,A.jsx)(me,{})}),e):null};let he=null;const we=()=>(0,A.jsx)(xe,{});t()((()=>{const e=document.getElementById("nfd-next-steps-portal");null!==e&&void 0!==s.createRoot&&(he||(he=(0,s.createRoot)(e)),he.render((0,A.jsx)(we,{})))}))})()})();